service: sms-api
provider:
  name      : aws
  runtime   : nodejs8.10
  region    : ur-region-5
  role      : arn:aws:iam::AAAABBBBCCCCDDDD:role/lambda_execution
  memorySize: 128
  timeout   : 5
  stage     : ${opt:stage, 'dev'}
functions:
  main:
    handler: src/index.run
    description: API that sends SMS
    environment:
      region         : ${self:custom.region}
      tableSmsRecords: ${self:custom.tables.smsRecords}
    exclude: 
      - package-lock.json
    events:
      - http:
          path  : "/sendMessage"
          method: post
resources:
  - ${file(resources/dynamodb.yml)}
custom:
  region: ${opt:region, self:provider.region}
  tables:
    smsRecords: sms_records


